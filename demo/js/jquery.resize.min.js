(function(n){function d(){if(!h){var t=(v?v:"")+".resize-triggers { "+(y?y:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));i.appendChild(n);h=!0}}var i=document.attachEvent,h=!1,p=n.fn.resize,c,l,t;if(n.fn.resize=function(n){return this.each(function(){this==window?p.call(jQuery(this),n):addResizeListener(this,n)})},n.fn.removeResize=function(n){return this.each(function(){removeResizeListener(this,n)})},!i){c=function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,20)};return function(t){return n(t)}}();l=function(){var n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return n(t)}}();function resetTriggers(n){var r=n.__resizeTriggers__,t=r.firstElementChild,i=r.lastElementChild,u=t.firstElementChild;i.scrollLeft=i.scrollWidth;i.scrollTop=i.scrollHeight;u.style.width=t.offsetWidth+1+"px";u.style.height=t.offsetHeight+1+"px";t.scrollLeft=t.scrollWidth;t.scrollTop=t.scrollHeight}function w(n){return n.offsetWidth!=n.__resizeLast__.width||n.offsetHeight!=n.__resizeLast__.height}function scrollListener(n){var t=this;resetTriggers(this);this.__resizeRAF__&&l(this.__resizeRAF__);this.__resizeRAF__=c(function(){w(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(i){i.call(t,n)}))})}var r=!1,b="animation",u="",f="animationstart",e="Webkit Moz O ms".split(" "),k="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),o="",a=document.createElement("fakeelement");if(a.style.animationName!==undefined&&(r=!0),r===!1)for(t=0;t<e.length;t++)if(a.style[e[t]+"AnimationName"]!==undefined){o=e[t];b=o+"Animation";u="-"+o.toLowerCase()+"-";f=k[t];r=!0;break}var s="resizeanim",v="@"+u+"keyframes "+s+" { from { opacity: 0; } to { opacity: 0; } } ",y=u+"animation: 1ms "+s+"; "}window.addResizeListener=function(n,t){i?n.attachEvent("onresize",t):(n.__resizeTriggers__||(getComputedStyle(n).position=="static"&&(n.style.position="relative"),d(),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div><\/div><\/div><div class="contract-trigger"><\/div>',n.appendChild(n.__resizeTriggers__),resetTriggers(n),n.addEventListener("scroll",scrollListener,!0),f&&n.__resizeTriggers__.addEventListener(f,function(t){t.animationName==s&&resetTriggers(n)})),n.__resizeListeners__.push(t))};window.removeResizeListener=function(n,t){i?n.detachEvent("onresize",t):(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(t),1),n.__resizeListeners__.length||(n.removeEventListener("scroll",scrollListener),n.__resizeTriggers__=!n.removeChild(n.__resizeTriggers__)))}})(jQuery);