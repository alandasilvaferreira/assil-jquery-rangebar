!function(e){function a(a,t){a.each(function(){var u=a.data("rangebar"),c=u.max-u.min;e.each(t,function(t,u){{var v=e("<div class='range'>").data("range",u);v.append("<div class='range-resize-handle left'>"),v.append("<div class='range-label'>"),v.append("<div class='range-resize-handle right'>")}a.append(v);var m=d(c,a.width(),u);v.offset({left:m.left}),v.width(m.right-m.left),u.disabled||(v.resizable({containment:a,handles:"e, w",resize:function(e,a){s(e,a)}}),v.draggable({containment:a,scroll:!1,axis:"x",handle:".range-label",start:n,drag:r,stop:i}).on("mousedown",f).on("mousemove",o).on("click",l)),s({target:v})})})}function t(a,t){if(!t)return null;var n;null!=t.start||null!=t.end||(n=e(t)),n.remove()}function n(e,a){s(e,a)}function r(a,t){var n=e(a.target),r=n.parent(),i=n.data("range");if(i.canOverlap||void 0==i.canOverlap){var l=r.children().overlaps(),f=n.height(),o=0;return r.height(0==l.length?f:l.length*f),l.each(function(a,t){e(t).offset({top:o+=f})}),!0}s(a,t)}function i(e,a){s(e,a)}function l(a){a.stopPropagation(),a.preventDefault();var n=e(this),r=n.parent(),i=r.data("rangebar");2===a.which&&i.allowDelete&&(n.data("deleteConfirm")?(t(r,this),clearTimeout(n.data("deleteTimeout"))):(n.addClass("delete-confirm"),n.data("deleteConfirm",!0),this.deleteTimeout=setTimeout(function(){n.removeClass("delete-confirm"),n.data("deleteConfirm",!1)},i.deleteTimeout)))}function f(e){e.stopPropagation(),e.preventDefault(),this.hasChanged=!1,e.which>1}function o(){}function s(a){var n=e(a.target),r=n.parent(),i=r.data("rangebar"),l=i.max-i.min,f=r.width(),o=n.offset().left,s={start:c(l,u(f,o)),end:c(l,u(f,o+n.width()))};n.data("range",s),e(".range-label",n).text(i.label(s))}function d(e,a,t){return{left:c(a,u(e,t.start)),right:c(a,u(e,t.end))}}function u(e,a){return 100*a/e}function c(e,a){return e*a/100}e.fn.rangeBar=function(t){var n=e.extend({},e.fn.rangeBar.defaultOptions,t);return this.each(function(){var t=e(this);t.data("rangebar",n),a(t,n.ranges)})},e.fn.rangeBar.defaultOptions={min:0,max:100,ranges:[],label:function(e){return parseInt(e.start)+"-"+parseInt(e.end)},allowDelete:!0,deleteTimeout:5e3},e.fn.rangeBar.defaultRange={start:0,end:0,disabled:!1,css:"",canOverlap:!1}}(jQuery);
