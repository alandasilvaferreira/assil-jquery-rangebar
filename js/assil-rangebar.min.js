!function(e){function a(a,t){a.each(function(){var o=a.data("rangebar"),f=o.max-o.min;e.each(t,function(t,o){{var d=e("<div class='range'>").data("range",o);d.append("<div class='range-resize-handle left'>"),d.append("<div class='range-label'>"),d.append("<div class='range-resize-handle right'>")}a.append(d);var v=s(f,a.width(),o);d.offset({left:v.left}),d.width(v.right-v.left),o.disabled||(d.resizable({containment:a,handles:"e, w",resize:function(e,a){l(e,a)}}),d.draggable({containment:a,scroll:!1,axis:"x",handle:".range-label",start:function(e,a){l(e,a)},drag:function(e,a){l(e,a)},stop:function(e,a){l(e,a)}}).on("mousedown",r).on("mousemove",i).on("click",n)),l({target:d})})})}function t(a,t){if(!t)return null;var n;null!=t.start||null!=t.end||(n=e(t)),n.remove()}function n(a){a.stopPropagation(),a.preventDefault();var n=e(this),r=n.parent(),i=r.data("rangebar");2===a.which&&i.allowDelete&&(n.data("deleteConfirm")?(t(r,this),clearTimeout(n.data("deleteTimeout"))):(n.addClass("delete-confirm"),n.data("deleteConfirm",!0),this.deleteTimeout=setTimeout(function(){n.removeClass("delete-confirm"),n.data("deleteConfirm",!1)},i.deleteTimeout)))}function r(e){e.stopPropagation(),e.preventDefault(),this.hasChanged=!1,e.which>1}function i(){}function l(a){var n=e(a.target),r=n.parent(),i=r.data("rangebar"),l=i.max-i.min,s=r.width(),d=n.offset().left,u={start:f(l,o(s,d)),end:f(l,o(s,d+n.width()))};n.data("range",u),e(".range-label",n).text(i.label(u))}function s(e,a,t){return{left:f(a,o(e,t.start)),right:f(a,o(e,t.end))}}function o(e,a){return 100*a/e}function f(e,a){return e*a/100}e.fn.rangeBar=function(t){var n=e.extend({},e.fn.rangeBar.defaultOptions,t);return this.each(function(){var t=e(this);t.data("rangebar",n),a(t,n.ranges)})},e.fn.rangeBar.defaultOptions={min:0,max:100,ranges:[],label:function(e){return parseInt(e.start)+"-"+parseInt(e.end)},allowDelete:!0,deleteTimeout:5e3},e.fn.rangeBar.defaultRange={start:0,end:0,disabled:!1,css:"",canOverlap:!1}}(jQuery);
